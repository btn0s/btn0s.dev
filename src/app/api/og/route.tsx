import Link from "next/link";
import { ImageResponse } from "next/og";
export const runtime = "edge";

export async function GET(request: Request) {
  const fontData = await fetch(
    new URL("../../../assets/fonts/Geist/Geist-Regular.otf", import.meta.url),
  ).then((res) => res.arrayBuffer());

  try {
    const { searchParams } = new URL(request.url);

    // ?title=<title>
    const hasTitle = searchParams.has("title");
    const title = hasTitle
      ? searchParams.get("title")?.slice(0, 100)
      : "bt norris";

    // ?category=<category>
    const hasCategory = searchParams.has("category");
    const category = hasCategory
      ? searchParams.get("category")?.slice(0, 300)
      : undefined;

    const imageData = await fetch(
      new URL("../../../../public/og-bg.png", import.meta.url),
    ).then((res) => res.arrayBuffer());

    return new ImageResponse(
      (
        <div
          style={{
            height: "100%",
            width: "100%",
            display: "flex",
            flexDirection: "column",
            alignItems: "flex-start",
            justifyContent: "space-between",
            backgroundColor: "black",
            color: "white",
            position: "relative",
          }}
        >
          {/* @ts-ignore */}
          <img src={imageData} tw="absolute inset-0" />
          <div
            style={{
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              gap: "1rem",
            }}
            tw="px-12 pt-12"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="803"
              height="40"
              fill="none"
            >
              <path
                fill="#fff"
                d="M14.6 32.68c-.6-3.44-3.04-7.76-7.68-11.24-2.28-1.72-4.6-2.84-6.88-3.32v-1.68C4.56 15.36 9 12.32 11.84 8.2c1.44-2.08 2.36-4.12 2.76-6.24h1.68c.68 4.04 3.8 8.52 8.04 11.52 2.08 1.48 4.24 2.48 6.44 2.96v1.68c-4.44.92-9.6 4.88-12.16 8.92-1.28 2.04-2.04 3.92-2.32 5.64H14.6Zm49.284 5.99c-2.898 0-5.459-.397-7.684-1.193-2.226-.786-4.096-1.946-5.611-3.48-1.515-1.534-2.661-3.414-3.438-5.639-.776-2.225-1.165-4.773-1.165-7.642 0-2.775.394-5.256 1.18-7.443.795-2.188 1.946-4.044 3.451-5.568C52.132 6.17 53.97 5 56.13 4.196c2.168-.805 4.62-1.207 7.358-1.207 2.66 0 4.99.435 6.988 1.306 2.008.862 3.684 2.032 5.029 3.509a14.702 14.702 0 0 1 3.04 4.957 16.204 16.204 0 0 1 1.022 5.682c0 1.373-.066 2.765-.199 4.176-.132 1.411-.412 2.709-.838 3.892-.426 1.175-1.084 2.122-1.974 2.841-.881.72-2.074 1.08-3.58 1.08-.663 0-1.392-.104-2.187-.313a5.744 5.744 0 0 1-2.117-1.037c-.615-.483-.98-1.131-1.094-1.946h-.17c-.227.55-.578 1.07-1.051 1.563-.464.492-1.075.885-1.833 1.179-.748.293-1.661.421-2.741.383-1.231-.047-2.315-.322-3.253-.823a7.076 7.076 0 0 1-2.358-2.074c-.625-.881-1.098-1.899-1.42-3.054-.313-1.165-.469-2.42-.469-3.764 0-1.279.19-2.448.568-3.51a8.909 8.909 0 0 1 1.577-2.783 7.97 7.97 0 0 1 2.386-1.904 8.198 8.198 0 0 1 2.969-.895c.947-.094 1.809-.052 2.585.128.777.17 1.416.431 1.918.782.502.34.819.72.952 1.136h.17v-1.59h3.011v12.84c0 .796.223 1.496.668 2.102.445.606 1.094.91 1.946.91.966 0 1.705-.332 2.216-.995.52-.663.876-1.686 1.065-3.068.2-1.383.299-3.154.299-5.313 0-1.269-.176-2.519-.526-3.75-.341-1.24-.862-2.4-1.563-3.48a11.362 11.362 0 0 0-2.627-2.855c-1.061-.824-2.306-1.468-3.736-1.932-1.42-.473-3.035-.71-4.844-.71-2.225 0-4.219.346-5.98 1.037-1.752.682-3.243 1.68-4.474 2.997-1.222 1.307-2.155 2.898-2.799 4.773-.634 1.865-.952 3.987-.952 6.364 0 2.414.318 4.56.952 6.434.644 1.875 1.591 3.457 2.841 4.744 1.26 1.288 2.817 2.264 4.673 2.927 1.857.672 3.997 1.008 6.42 1.008 1.043 0 2.07-.1 3.083-.298a27.368 27.368 0 0 0 2.685-.654 77.693 77.693 0 0 0 1.676-.525l.796 2.614c-.588.246-1.355.492-2.302.738-.937.246-1.94.45-3.011.611-1.06.161-2.074.241-3.04.241Zm-1.648-11.306c1.27 0 2.297-.256 3.083-.767.786-.512 1.359-1.284 1.719-2.316.36-1.032.54-2.334.54-3.906 0-1.59-.2-2.831-.597-3.722-.398-.89-.985-1.515-1.761-1.875-.777-.36-1.733-.54-2.87-.54-1.08 0-2.003.285-2.77.853-.757.559-1.34 1.307-1.747 2.244-.398.928-.596 1.941-.596 3.04 0 1.212.16 2.353.482 3.423.322 1.06.848 1.923 1.577 2.586.73.653 1.71.98 2.94.98ZM85.038 31V1.91h3.353v10.738h.284c.246-.38.587-.862 1.022-1.45.445-.596 1.08-1.126 1.904-1.59.833-.474 1.96-.71 3.38-.71 1.838 0 3.457.459 4.859 1.378 1.401.918 2.495 2.22 3.281 3.906.786 1.685 1.179 3.674 1.179 5.966 0 2.31-.393 4.313-1.179 6.008-.786 1.686-1.875 2.993-3.267 3.92-1.392.92-2.998 1.378-4.816 1.378-1.401 0-2.523-.232-3.366-.695-.843-.474-1.492-1.009-1.946-1.606a21.473 21.473 0 0 1-1.051-1.505h-.398V31h-3.239Zm3.296-10.91c0 1.649.241 3.102.724 4.362.483 1.25 1.189 2.23 2.117 2.94.928.7 2.064 1.051 3.409 1.051 1.401 0 2.57-.37 3.508-1.108.947-.748 1.657-1.752 2.131-3.011.483-1.27.724-2.68.724-4.233 0-1.534-.236-2.917-.71-4.148-.464-1.24-1.17-2.22-2.116-2.94-.938-.73-2.117-1.094-3.537-1.094-1.364 0-2.51.346-3.438 1.037-.928.682-1.629 1.638-2.102 2.87-.474 1.22-.71 2.646-.71 4.275Zm30.582-10.908v2.84h-11.307v-2.84h11.307Zm-8.011-5.227h3.352V24.75c0 .947.137 1.657.412 2.13.284.465.644.777 1.08.938a4.33 4.33 0 0 0 1.406.227c.369 0 .672-.019.909-.056l.568-.114.682 3.011c-.227.086-.545.17-.952.256-.407.095-.923.142-1.548.142a6.747 6.747 0 0 1-2.784-.61 5.524 5.524 0 0 1-2.244-1.861c-.588-.834-.881-1.885-.881-3.154V3.955Zm16.406 13.92V31h-3.352V9.182h3.238v3.409h.285a6.225 6.225 0 0 1 2.329-2.67c1.042-.682 2.386-1.023 4.034-1.023 1.477 0 2.77.303 3.878.909 1.108.596 1.97 1.505 2.585 2.727.616 1.212.924 2.746.924 4.602V31h-3.353V17.364c0-1.714-.445-3.05-1.335-4.006-.89-.966-2.112-1.449-3.665-1.449-1.07 0-2.026.232-2.869.696-.833.464-1.492 1.141-1.974 2.031-.483.89-.725 1.97-.725 3.239Zm29.478 13.523c-2.14 0-3.963-.583-5.469-1.747-1.505-1.175-2.656-2.875-3.451-5.1-.796-2.235-1.194-4.934-1.194-8.096 0-3.144.398-5.83 1.194-8.054.805-2.235 1.96-3.94 3.466-5.114 1.515-1.184 3.333-1.776 5.454-1.776 2.121 0 3.935.592 5.44 1.776 1.516 1.174 2.671 2.879 3.466 5.114.805 2.225 1.208 4.91 1.208 8.053 0 3.163-.398 5.862-1.193 8.097-.796 2.226-1.947 3.925-3.452 5.1-1.506 1.164-3.329 1.747-5.469 1.747Zm0-3.125c2.121 0 3.769-1.023 4.943-3.069 1.174-2.045 1.762-4.962 1.762-8.75 0-2.518-.27-4.663-.81-6.434-.53-1.77-1.297-3.12-2.301-4.048-.995-.928-2.192-1.392-3.594-1.392-2.102 0-3.745 1.036-4.929 3.11-1.184 2.065-1.775 4.986-1.775 8.764 0 2.52.265 4.66.795 6.421.53 1.761 1.293 3.101 2.287 4.02 1.004.918 2.211 1.378 3.622 1.378Zm31.023-14.205-3.012.853a5.563 5.563 0 0 0-.838-1.464c-.359-.483-.852-.88-1.477-1.193-.625-.312-1.425-.468-2.4-.468-1.336 0-2.448.307-3.339.923-.88.606-1.321 1.378-1.321 2.315 0 .833.303 1.492.91 1.975.606.482 1.553.885 2.84 1.207l3.239.795c1.951.474 3.404 1.198 4.361 2.174.956.966 1.435 2.21 1.435 3.736 0 1.25-.36 2.367-1.08 3.352-.71.985-1.705 1.761-2.983 2.33-1.278.567-2.765.851-4.46.851-2.226 0-4.067-.482-5.526-1.448-1.458-.966-2.381-2.377-2.77-4.233l3.182-.796c.303 1.174.876 2.055 1.719 2.642.852.587 1.965.881 3.338.881 1.562 0 2.803-.331 3.722-.994.928-.673 1.392-1.478 1.392-2.415 0-.758-.266-1.392-.796-1.904-.53-.52-1.345-.909-2.443-1.164l-3.636-.852c-1.998-.474-3.466-1.208-4.404-2.202-.928-1.004-1.392-2.259-1.392-3.765 0-1.23.346-2.32 1.037-3.267.701-.946 1.653-1.69 2.855-2.23 1.212-.54 2.585-.81 4.12-.81 2.159 0 3.854.474 5.085 1.421 1.24.947 2.121 2.197 2.642 3.75Z"
              />
              <path
                fill="url(#a)"
                d="M14.6 32.68c-.6-3.44-3.04-7.76-7.68-11.24-2.28-1.72-4.6-2.84-6.88-3.32v-1.68C4.56 15.36 9 12.32 11.84 8.2c1.44-2.08 2.36-4.12 2.76-6.24h1.68c.68 4.04 3.8 8.52 8.04 11.52 2.08 1.48 4.24 2.48 6.44 2.96v1.68c-4.44.92-9.6 4.88-12.16 8.92-1.28 2.04-2.04 3.92-2.32 5.64H14.6Zm49.284 5.99c-2.898 0-5.459-.397-7.684-1.193-2.226-.786-4.096-1.946-5.611-3.48-1.515-1.534-2.661-3.414-3.438-5.639-.776-2.225-1.165-4.773-1.165-7.642 0-2.775.394-5.256 1.18-7.443.795-2.188 1.946-4.044 3.451-5.568C52.132 6.17 53.97 5 56.13 4.196c2.168-.805 4.62-1.207 7.358-1.207 2.66 0 4.99.435 6.988 1.306 2.008.862 3.684 2.032 5.029 3.509a14.702 14.702 0 0 1 3.04 4.957 16.204 16.204 0 0 1 1.022 5.682c0 1.373-.066 2.765-.199 4.176-.132 1.411-.412 2.709-.838 3.892-.426 1.175-1.084 2.122-1.974 2.841-.881.72-2.074 1.08-3.58 1.08-.663 0-1.392-.104-2.187-.313a5.744 5.744 0 0 1-2.117-1.037c-.615-.483-.98-1.131-1.094-1.946h-.17c-.227.55-.578 1.07-1.051 1.563-.464.492-1.075.885-1.833 1.179-.748.293-1.661.421-2.741.383-1.231-.047-2.315-.322-3.253-.823a7.076 7.076 0 0 1-2.358-2.074c-.625-.881-1.098-1.899-1.42-3.054-.313-1.165-.469-2.42-.469-3.764 0-1.279.19-2.448.568-3.51a8.909 8.909 0 0 1 1.577-2.783 7.97 7.97 0 0 1 2.386-1.904 8.198 8.198 0 0 1 2.969-.895c.947-.094 1.809-.052 2.585.128.777.17 1.416.431 1.918.782.502.34.819.72.952 1.136h.17v-1.59h3.011v12.84c0 .796.223 1.496.668 2.102.445.606 1.094.91 1.946.91.966 0 1.705-.332 2.216-.995.52-.663.876-1.686 1.065-3.068.2-1.383.299-3.154.299-5.313 0-1.269-.176-2.519-.526-3.75-.341-1.24-.862-2.4-1.563-3.48a11.362 11.362 0 0 0-2.627-2.855c-1.061-.824-2.306-1.468-3.736-1.932-1.42-.473-3.035-.71-4.844-.71-2.225 0-4.219.346-5.98 1.037-1.752.682-3.243 1.68-4.474 2.997-1.222 1.307-2.155 2.898-2.799 4.773-.634 1.865-.952 3.987-.952 6.364 0 2.414.318 4.56.952 6.434.644 1.875 1.591 3.457 2.841 4.744 1.26 1.288 2.817 2.264 4.673 2.927 1.857.672 3.997 1.008 6.42 1.008 1.043 0 2.07-.1 3.083-.298a27.368 27.368 0 0 0 2.685-.654 77.693 77.693 0 0 0 1.676-.525l.796 2.614c-.588.246-1.355.492-2.302.738-.937.246-1.94.45-3.011.611-1.06.161-2.074.241-3.04.241Zm-1.648-11.306c1.27 0 2.297-.256 3.083-.767.786-.512 1.359-1.284 1.719-2.316.36-1.032.54-2.334.54-3.906 0-1.59-.2-2.831-.597-3.722-.398-.89-.985-1.515-1.761-1.875-.777-.36-1.733-.54-2.87-.54-1.08 0-2.003.285-2.77.853-.757.559-1.34 1.307-1.747 2.244-.398.928-.596 1.941-.596 3.04 0 1.212.16 2.353.482 3.423.322 1.06.848 1.923 1.577 2.586.73.653 1.71.98 2.94.98ZM85.038 31V1.91h3.353v10.738h.284c.246-.38.587-.862 1.022-1.45.445-.596 1.08-1.126 1.904-1.59.833-.474 1.96-.71 3.38-.71 1.838 0 3.457.459 4.859 1.378 1.401.918 2.495 2.22 3.281 3.906.786 1.685 1.179 3.674 1.179 5.966 0 2.31-.393 4.313-1.179 6.008-.786 1.686-1.875 2.993-3.267 3.92-1.392.92-2.998 1.378-4.816 1.378-1.401 0-2.523-.232-3.366-.695-.843-.474-1.492-1.009-1.946-1.606a21.473 21.473 0 0 1-1.051-1.505h-.398V31h-3.239Zm3.296-10.91c0 1.649.241 3.102.724 4.362.483 1.25 1.189 2.23 2.117 2.94.928.7 2.064 1.051 3.409 1.051 1.401 0 2.57-.37 3.508-1.108.947-.748 1.657-1.752 2.131-3.011.483-1.27.724-2.68.724-4.233 0-1.534-.236-2.917-.71-4.148-.464-1.24-1.17-2.22-2.116-2.94-.938-.73-2.117-1.094-3.537-1.094-1.364 0-2.51.346-3.438 1.037-.928.682-1.629 1.638-2.102 2.87-.474 1.22-.71 2.646-.71 4.275Zm30.582-10.908v2.84h-11.307v-2.84h11.307Zm-8.011-5.227h3.352V24.75c0 .947.137 1.657.412 2.13.284.465.644.777 1.08.938a4.33 4.33 0 0 0 1.406.227c.369 0 .672-.019.909-.056l.568-.114.682 3.011c-.227.086-.545.17-.952.256-.407.095-.923.142-1.548.142a6.747 6.747 0 0 1-2.784-.61 5.524 5.524 0 0 1-2.244-1.861c-.588-.834-.881-1.885-.881-3.154V3.955Zm16.406 13.92V31h-3.352V9.182h3.238v3.409h.285a6.225 6.225 0 0 1 2.329-2.67c1.042-.682 2.386-1.023 4.034-1.023 1.477 0 2.77.303 3.878.909 1.108.596 1.97 1.505 2.585 2.727.616 1.212.924 2.746.924 4.602V31h-3.353V17.364c0-1.714-.445-3.05-1.335-4.006-.89-.966-2.112-1.449-3.665-1.449-1.07 0-2.026.232-2.869.696-.833.464-1.492 1.141-1.974 2.031-.483.89-.725 1.97-.725 3.239Zm29.478 13.523c-2.14 0-3.963-.583-5.469-1.747-1.505-1.175-2.656-2.875-3.451-5.1-.796-2.235-1.194-4.934-1.194-8.096 0-3.144.398-5.83 1.194-8.054.805-2.235 1.96-3.94 3.466-5.114 1.515-1.184 3.333-1.776 5.454-1.776 2.121 0 3.935.592 5.44 1.776 1.516 1.174 2.671 2.879 3.466 5.114.805 2.225 1.208 4.91 1.208 8.053 0 3.163-.398 5.862-1.193 8.097-.796 2.226-1.947 3.925-3.452 5.1-1.506 1.164-3.329 1.747-5.469 1.747Zm0-3.125c2.121 0 3.769-1.023 4.943-3.069 1.174-2.045 1.762-4.962 1.762-8.75 0-2.518-.27-4.663-.81-6.434-.53-1.77-1.297-3.12-2.301-4.048-.995-.928-2.192-1.392-3.594-1.392-2.102 0-3.745 1.036-4.929 3.11-1.184 2.065-1.775 4.986-1.775 8.764 0 2.52.265 4.66.795 6.421.53 1.761 1.293 3.101 2.287 4.02 1.004.918 2.211 1.378 3.622 1.378Zm31.023-14.205-3.012.853a5.563 5.563 0 0 0-.838-1.464c-.359-.483-.852-.88-1.477-1.193-.625-.312-1.425-.468-2.4-.468-1.336 0-2.448.307-3.339.923-.88.606-1.321 1.378-1.321 2.315 0 .833.303 1.492.91 1.975.606.482 1.553.885 2.84 1.207l3.239.795c1.951.474 3.404 1.198 4.361 2.174.956.966 1.435 2.21 1.435 3.736 0 1.25-.36 2.367-1.08 3.352-.71.985-1.705 1.761-2.983 2.33-1.278.567-2.765.851-4.46.851-2.226 0-4.067-.482-5.526-1.448-1.458-.966-2.381-2.377-2.77-4.233l3.182-.796c.303 1.174.876 2.055 1.719 2.642.852.587 1.965.881 3.338.881 1.562 0 2.803-.331 3.722-.994.928-.673 1.392-1.478 1.392-2.415 0-.758-.266-1.392-.796-1.904-.53-.52-1.345-.909-2.443-1.164l-3.636-.852c-1.998-.474-3.466-1.208-4.404-2.202-.928-1.004-1.392-2.259-1.392-3.765 0-1.23.346-2.32 1.037-3.267.701-.946 1.653-1.69 2.855-2.23 1.212-.54 2.585-.81 4.12-.81 2.159 0 3.854.474 5.085 1.421 1.24.947 2.121 2.197 2.642 3.75Z"
              />
              <path
                fill="#fff"
                fill-opacity=".25"
                d="m214.79.545-9.375 34.83h-3.068l9.375-34.83h3.068Zm14.258 0-9.375 34.83h-3.069l9.375-34.83h3.069Zm23.462 30.91c-1.818 0-3.423-.46-4.815-1.378-1.392-.928-2.481-2.235-3.267-3.92-.786-1.696-1.179-3.699-1.179-6.01 0-2.29.393-4.28 1.179-5.965.786-1.686 1.879-2.988 3.281-3.906 1.401-.919 3.021-1.378 4.858-1.378 1.42 0 2.542.236 3.366.71.834.464 1.468.994 1.904 1.59.445.588.79 1.07 1.037 1.45h.284V1.909h3.352V31h-3.239v-3.352h-.397c-.247.398-.597.9-1.052 1.505-.454.597-1.103 1.132-1.946 1.606-.842.463-1.965.695-3.366.695Zm.454-3.012c1.345 0 2.482-.35 3.41-1.051.928-.71 1.633-1.69 2.116-2.94.483-1.26.724-2.713.724-4.361 0-1.629-.236-3.054-.71-4.276-.473-1.23-1.174-2.187-2.102-2.869-.928-.691-2.074-1.037-3.438-1.037-1.42 0-2.604.365-3.551 1.094-.937.72-1.643 1.7-2.116 2.94-.464 1.231-.696 2.614-.696 4.148 0 1.553.237 2.964.71 4.233.483 1.26 1.193 2.263 2.131 3.011.947.739 2.121 1.108 3.522 1.108Zm25.299 3.011c-2.102 0-3.916-.463-5.441-1.392-1.515-.937-2.684-2.244-3.508-3.92-.814-1.686-1.222-3.646-1.222-5.88 0-2.236.408-4.205 1.222-5.91.824-1.714 1.97-3.049 3.437-4.005 1.478-.966 3.201-1.45 5.171-1.45 1.136 0 2.258.19 3.366.569 1.108.379 2.117.994 3.026 1.847.909.842 1.633 1.96 2.173 3.352s.81 3.106.81 5.142v1.42h-16.818V18.33h13.409c0-1.23-.246-2.329-.739-3.295a5.564 5.564 0 0 0-2.074-2.287c-.89-.559-1.941-.838-3.153-.838-1.335 0-2.491.332-3.466.994a6.541 6.541 0 0 0-2.23 2.557 7.51 7.51 0 0 0-.781 3.38v1.933c0 1.648.284 3.044.852 4.19.578 1.136 1.378 2.003 2.4 2.6 1.023.587 2.212.88 3.566.88.88 0 1.676-.123 2.386-.37a5.108 5.108 0 0 0 1.861-1.136c.521-.51.923-1.145 1.207-1.903l3.239.91a7.181 7.181 0 0 1-1.719 2.897c-.805.824-1.799 1.468-2.983 1.932-1.183.454-2.514.681-3.991.681Zm29.588-17.386-3.012.853a5.563 5.563 0 0 0-.838-1.464c-.359-.483-.852-.88-1.477-1.193-.625-.312-1.425-.468-2.4-.468-1.336 0-2.448.307-3.338.923-.881.606-1.322 1.378-1.322 2.315 0 .833.304 1.492.91 1.975.606.482 1.553.885 2.84 1.207l3.239.795c1.951.474 3.404 1.198 4.361 2.174.956.966 1.435 2.21 1.435 3.736 0 1.25-.36 2.367-1.08 3.352-.71.985-1.705 1.761-2.983 2.33-1.278.567-2.765.851-4.46.851-2.226 0-4.067-.482-5.526-1.448-1.458-.966-2.381-2.377-2.77-4.233l3.182-.796c.303 1.174.876 2.055 1.719 2.642.852.587 1.965.881 3.338.881 1.563 0 2.803-.331 3.722-.994.928-.673 1.392-1.478 1.392-2.415 0-.758-.265-1.392-.796-1.904-.53-.52-1.344-.909-2.443-1.164l-3.636-.852c-1.998-.474-3.466-1.208-4.404-2.202-.928-1.004-1.392-2.259-1.392-3.765 0-1.23.346-2.32 1.037-3.267.701-.946 1.653-1.69 2.855-2.23 1.212-.54 2.585-.81 4.12-.81 2.159 0 3.854.474 5.085 1.421 1.24.947 2.121 2.197 2.642 3.75ZM313.295 31V9.182h3.352V31h-3.352Zm1.704-25.455a2.383 2.383 0 0 1-1.69-.667c-.464-.445-.696-.98-.696-1.605s.232-1.16.696-1.605a2.383 2.383 0 0 1 1.69-.668c.654 0 1.212.223 1.676.668.474.445.711.98.711 1.605s-.237 1.16-.711 1.605a2.333 2.333 0 0 1-1.676.667Zm16.595 34.091c-1.62 0-3.012-.208-4.176-.625-1.165-.407-2.136-.947-2.912-1.619-.767-.663-1.378-1.373-1.833-2.13l2.671-1.876c.303.398.686.853 1.15 1.364.464.52 1.099.97 1.904 1.35.814.388 1.879.582 3.196.582 1.761 0 3.215-.426 4.361-1.279 1.145-.852 1.718-2.187 1.718-4.005v-4.432h-.284c-.246.398-.596.89-1.051 1.477-.445.578-1.089 1.094-1.932 1.548-.833.446-1.96.668-3.38.668-1.762 0-3.343-.417-4.745-1.25-1.392-.833-2.495-2.045-3.309-3.636-.805-1.591-1.208-3.523-1.208-5.796 0-2.235.393-4.18 1.179-5.838.786-1.666 1.88-2.954 3.281-3.863 1.402-.919 3.021-1.378 4.858-1.378 1.421 0 2.548.236 3.381.71.843.464 1.487.994 1.932 1.59.454.588.805 1.07 1.051 1.45h.341V9.182h3.239v22.443c0 1.875-.427 3.4-1.279 4.574-.843 1.184-1.979 2.05-3.409 2.6-1.42.558-3.002.837-4.744.837Zm-.114-11.988c1.345 0 2.481-.308 3.409-.924.928-.615 1.634-1.5 2.117-2.656.483-1.155.724-2.538.724-4.148 0-1.572-.237-2.959-.71-4.162-.474-1.202-1.174-2.144-2.102-2.826-.928-.682-2.074-1.023-3.438-1.023-1.42 0-2.604.36-3.551 1.08-.938.72-1.643 1.685-2.117 2.897-.464 1.213-.696 2.557-.696 4.035 0 1.515.237 2.855.711 4.02.483 1.155 1.193 2.064 2.13 2.727.947.653 2.122.98 3.523.98Zm19.034-9.773V31h-3.352V9.182h3.239v3.409h.284a6.232 6.232 0 0 1 2.329-2.67c1.042-.682 2.387-1.023 4.034-1.023 1.478 0 2.77.303 3.878.909 1.108.596 1.97 1.505 2.585 2.727.616 1.212.924 2.746.924 4.602V31h-3.353V17.364c0-1.714-.445-3.05-1.335-4.006-.89-.966-2.112-1.449-3.665-1.449-1.07 0-2.026.232-2.869.696-.833.464-1.491 1.141-1.974 2.031-.483.89-.725 1.97-.725 3.239Zm29.194 13.58c-2.102 0-3.916-.464-5.44-1.392-1.515-.938-2.685-2.245-3.509-3.921-.814-1.686-1.221-3.646-1.221-5.88 0-2.236.407-4.205 1.221-5.91.824-1.714 1.97-3.049 3.438-4.005 1.477-.966 3.2-1.45 5.17-1.45 1.137 0 2.259.19 3.367.569 1.108.379 2.116.994 3.025 1.847.909.842 1.634 1.96 2.174 3.352.539 1.392.809 3.106.809 5.142v1.42h-16.818V18.33h13.409c0-1.23-.246-2.329-.739-3.295a5.562 5.562 0 0 0-2.073-2.287c-.891-.559-1.942-.838-3.154-.838-1.335 0-2.49.332-3.466.994a6.541 6.541 0 0 0-2.23 2.557 7.51 7.51 0 0 0-.781 3.38v1.933c0 1.648.284 3.044.852 4.19.578 1.136 1.378 2.003 2.401 2.6 1.022.587 2.211.88 3.565.88.881 0 1.676-.123 2.386-.37a5.108 5.108 0 0 0 1.861-1.136c.521-.51.924-1.145 1.208-1.903l3.238.91a7.19 7.19 0 0 1-1.718 2.897c-.805.824-1.8 1.468-2.983 1.932-1.184.454-2.515.681-3.992.681ZM393.842 31V9.182h3.238v3.295h.228c.397-1.08 1.117-1.955 2.159-2.628 1.041-.672 2.216-1.008 3.522-1.008.247 0 .554.005.924.014.369.01.648.024.838.043v3.409a9.958 9.958 0 0 0-.782-.128 7.679 7.679 0 0 0-1.264-.1c-1.06 0-2.007.223-2.841.668a5.035 5.035 0 0 0-1.96 1.818c-.473.767-.71 1.643-.71 2.628V31h-3.352Zm17.382-3.977-.227 1.534a31.043 31.043 0 0 1-.738 3.466 65.813 65.813 0 0 1-1.009 3.48c-.35 1.089-.639 1.955-.866 2.6h-2.557l.483-2.401c.199-.995.397-2.107.596-3.338a57.55 57.55 0 0 0 .512-3.75l.17-1.591h3.636Zm17.461 12.159v-30h3.239v3.466h.398c.246-.38.587-.862 1.022-1.45.446-.596 1.08-1.126 1.904-1.59.833-.474 1.96-.71 3.381-.71 1.837 0 3.456.459 4.858 1.378 1.401.918 2.495 2.22 3.281 3.906.786 1.685 1.179 3.674 1.179 5.966 0 2.31-.393 4.313-1.179 6.008-.786 1.686-1.875 2.993-3.267 3.92-1.392.92-2.997 1.378-4.816 1.378-1.401 0-2.523-.232-3.366-.695-.843-.474-1.492-1.009-1.946-1.606a21.256 21.256 0 0 1-1.051-1.505h-.284v11.534h-3.353Zm3.296-19.091c0 1.648.241 3.101.724 4.36.483 1.25 1.189 2.23 2.117 2.941.928.7 2.064 1.051 3.409 1.051 1.401 0 2.571-.37 3.508-1.108.947-.748 1.658-1.752 2.131-3.011.483-1.27.724-2.68.724-4.233 0-1.534-.236-2.917-.71-4.148-.464-1.24-1.169-2.22-2.116-2.94-.938-.73-2.117-1.094-3.537-1.094-1.364 0-2.51.346-3.438 1.037-.928.682-1.628 1.638-2.102 2.87-.473 1.22-.71 2.646-.71 4.275ZM453.06 31V9.182h3.239v3.295h.227c.398-1.08 1.118-1.955 2.159-2.628 1.042-.672 2.216-1.008 3.523-1.008.246 0 .554.005.923.014.37.01.649.024.838.043v3.409a9.9 9.9 0 0 0-.781-.128 7.687 7.687 0 0 0-1.264-.1c-1.061 0-2.008.223-2.841.668a5.035 5.035 0 0 0-1.96 1.818c-.474.767-.71 1.643-.71 2.628V31h-3.353Zm23.083.454c-1.97 0-3.698-.468-5.185-1.406-1.477-.937-2.632-2.249-3.466-3.934-.824-1.686-1.236-3.656-1.236-5.91 0-2.272.412-4.256 1.236-5.951.834-1.695 1.989-3.011 3.466-3.949 1.487-.938 3.215-1.406 5.185-1.406 1.969 0 3.693.468 5.17 1.406 1.487.938 2.642 2.254 3.466 3.949.833 1.695 1.25 3.679 1.25 5.951 0 2.254-.417 4.224-1.25 5.91-.824 1.685-1.979 2.997-3.466 3.934-1.477.938-3.201 1.407-5.17 1.407Zm0-3.01c1.496 0 2.727-.384 3.693-1.151.966-.767 1.681-1.776 2.145-3.026.464-1.25.696-2.604.696-4.063 0-1.458-.232-2.817-.696-4.076-.464-1.26-1.179-2.278-2.145-3.054-.966-.777-2.197-1.165-3.693-1.165s-2.728.388-3.693 1.165c-.966.776-1.681 1.794-2.145 3.054-.464 1.26-.696 2.618-.696 4.076 0 1.459.232 2.813.696 4.063.464 1.25 1.179 2.259 2.145 3.026.965.767 2.197 1.15 3.693 1.15Zm23.81 11.192c-1.619 0-3.011-.208-4.176-.625-1.165-.407-2.135-.947-2.912-1.619-.767-.663-1.378-1.373-1.832-2.13l2.67-1.876c.303.398.687.853 1.151 1.364.464.52 1.098.97 1.903 1.35.814.388 1.88.582 3.196.582 1.761 0 3.215-.426 4.361-1.279 1.146-.852 1.719-2.187 1.719-4.005v-4.432h-.284c-.247.398-.597.89-1.052 1.477-.445.578-1.089 1.094-1.931 1.548-.834.446-1.961.668-3.381.668-1.761 0-3.343-.417-4.744-1.25-1.392-.833-2.496-2.045-3.31-3.636-.805-1.591-1.207-3.523-1.207-5.796 0-2.235.393-4.18 1.179-5.838.786-1.666 1.879-2.954 3.281-3.863 1.401-.919 3.021-1.378 4.858-1.378 1.42 0 2.547.236 3.38.71.843.464 1.487.994 1.932 1.59.455.588.805 1.07 1.051 1.45h.341V9.182h3.239v22.443c0 1.875-.426 3.4-1.278 4.574-.843 1.184-1.98 2.05-3.41 2.6-1.42.558-3.001.837-4.744.837Zm-.114-11.988c1.345 0 2.482-.308 3.41-.924.928-.615 1.633-1.5 2.116-2.656.483-1.155.724-2.538.724-4.148 0-1.572-.236-2.959-.71-4.162-.473-1.202-1.174-2.144-2.102-2.826-.928-.682-2.074-1.023-3.438-1.023-1.42 0-2.604.36-3.551 1.08-.937.72-1.643 1.685-2.116 2.897-.464 1.213-.696 2.557-.696 4.035 0 1.515.237 2.855.71 4.02.483 1.155 1.193 2.064 2.131 2.727.947.653 2.121.98 3.522.98ZM515.521 31V9.182h3.239v3.295h.227c.398-1.08 1.118-1.955 2.159-2.628 1.042-.672 2.216-1.008 3.523-1.008.246 0 .554.005.923.014.37.01.649.024.838.043v3.409a9.9 9.9 0 0 0-.781-.128 7.687 7.687 0 0 0-1.264-.1c-1.061 0-2.008.223-2.841.668a5.035 5.035 0 0 0-1.96 1.818c-.474.767-.71 1.643-.71 2.628V31h-3.353Zm21.304.511c-1.383 0-2.638-.26-3.765-.78-1.127-.531-2.021-1.294-2.684-2.288-.663-1.004-.995-2.216-.995-3.636 0-1.25.247-2.263.739-3.04a5.215 5.215 0 0 1 1.974-1.846 10.374 10.374 0 0 1 2.728-.995 33.214 33.214 0 0 1 3.025-.54c1.326-.17 2.401-.298 3.225-.383.833-.095 1.439-.251 1.818-.469.388-.218.582-.596.582-1.136v-.114c0-1.401-.383-2.49-1.15-3.267-.758-.776-1.908-1.165-3.452-1.165-1.6 0-2.855.35-3.764 1.051-.909.701-1.548 1.45-1.918 2.245l-3.182-1.137c.569-1.325 1.326-2.358 2.273-3.096a8.521 8.521 0 0 1 3.125-1.563 12.973 12.973 0 0 1 3.352-.454c.701 0 1.506.085 2.415.255a7.722 7.722 0 0 1 2.656 1.009c.862.511 1.577 1.283 2.145 2.315.568 1.032.853 2.415.853 4.148V31h-3.353v-2.954h-.17c-.227.473-.606.98-1.137 1.52-.53.54-1.235.998-2.116 1.377s-1.955.568-3.224.568Zm.511-3.011c1.326 0 2.443-.26 3.352-.781.919-.521 1.61-1.193 2.074-2.017.474-.824.71-1.69.71-2.6v-3.068c-.142.17-.454.327-.937.469a15.85 15.85 0 0 1-1.648.355c-.615.095-1.217.18-1.804.256-.578.066-1.046.123-1.406.17-.871.114-1.686.298-2.443.554-.748.246-1.355.62-1.819 1.122-.454.493-.681 1.165-.681 2.017 0 1.165.431 2.046 1.292 2.642.871.587 1.975.881 3.31.881Zm15.607 2.5V9.182h3.239v3.409h.284c.454-1.165 1.188-2.07 2.202-2.713 1.013-.654 2.23-.98 3.65-.98 1.44 0 2.637.326 3.594.98.966.644 1.719 1.548 2.258 2.713h.228c.558-1.127 1.397-2.022 2.514-2.685 1.117-.672 2.457-1.008 4.02-1.008 1.951 0 3.546.61 4.787 1.832 1.24 1.212 1.861 3.101 1.861 5.668V31h-3.353V16.398c0-1.61-.44-2.76-1.321-3.452-.88-.691-1.917-1.037-3.111-1.037-1.534 0-2.722.464-3.565 1.392-.843.919-1.264 2.083-1.264 3.495V31h-3.409V16.057c0-1.24-.403-2.24-1.208-2.997-.804-.767-1.841-1.15-3.11-1.15-.872 0-1.686.231-2.444.695-.748.464-1.354 1.108-1.818 1.932-.454.814-.682 1.757-.682 2.827V31h-3.352Zm34.766 0V9.182h3.238v3.409h.285c.454-1.165 1.188-2.07 2.201-2.713 1.013-.654 2.23-.98 3.651-.98 1.439 0 2.637.326 3.594.98.965.644 1.718 1.548 2.258 2.713h.227c.559-1.127 1.397-2.022 2.515-2.685 1.117-.672 2.457-1.008 4.019-1.008 1.951 0 3.547.61 4.787 1.832 1.241 1.212 1.861 3.101 1.861 5.668V31h-3.352V16.398c0-1.61-.44-2.76-1.321-3.452-.881-.691-1.918-1.037-3.111-1.037-1.534 0-2.722.464-3.565 1.392-.843.919-1.264 2.083-1.264 3.495V31h-3.41V16.057c0-1.24-.402-2.24-1.207-2.997-.805-.767-1.842-1.15-3.111-1.15-.871 0-1.685.231-2.443.695-.748.464-1.354 1.108-1.818 1.932-.455.814-.682 1.757-.682 2.827V31h-3.352Zm43.913.454c-2.102 0-3.916-.463-5.44-1.392-1.515-.937-2.685-2.244-3.509-3.92-.814-1.686-1.221-3.646-1.221-5.88 0-2.236.407-4.205 1.221-5.91.824-1.714 1.97-3.049 3.438-4.005 1.477-.966 3.201-1.45 5.17-1.45 1.137 0 2.259.19 3.367.569 1.108.379 2.116.994 3.025 1.847.909.842 1.634 1.96 2.174 3.352.539 1.392.809 3.106.809 5.142v1.42h-16.818V18.33h13.409c0-1.23-.246-2.329-.738-3.295a5.57 5.57 0 0 0-2.074-2.287c-.89-.559-1.942-.838-3.154-.838-1.335 0-2.49.332-3.466.994a6.541 6.541 0 0 0-2.23 2.557 7.51 7.51 0 0 0-.781 3.38v1.933c0 1.648.284 3.044.852 4.19.578 1.136 1.378 2.003 2.401 2.6 1.023.587 2.211.88 3.565.88.881 0 1.676-.123 2.387-.37a5.112 5.112 0 0 0 1.86-1.136c.521-.51.924-1.145 1.208-1.903l3.238.91a7.179 7.179 0 0 1-1.718 2.897c-.805.824-1.8 1.468-2.983 1.932-1.184.454-2.515.681-3.992.681ZM645.756 31V9.182h3.238v3.295h.228c.397-1.08 1.117-1.955 2.159-2.628 1.041-.672 2.216-1.008 3.522-1.008.247 0 .554.005.924.014.369.01.648.024.838.043v3.409a9.989 9.989 0 0 0-.781-.128 7.7 7.7 0 0 0-1.265-.1c-1.06 0-2.007.223-2.841.668a5.041 5.041 0 0 0-1.96 1.818c-.473.767-.71 1.643-.71 2.628V31h-3.352Zm17.382-3.977-.227 1.534a31.043 31.043 0 0 1-.738 3.466 65.813 65.813 0 0 1-1.009 3.48c-.35 1.089-.639 1.955-.866 2.6h-2.557l.483-2.401c.199-.995.397-2.107.596-3.338a57.55 57.55 0 0 0 .512-3.75l.17-1.591h3.636Zm20.814-9.148V31h-3.353V1.91h3.353v10.68h.284a6.163 6.163 0 0 1 2.301-2.684c1.032-.672 2.405-1.008 4.119-1.008 1.487 0 2.789.298 3.906.895 1.118.587 1.984 1.491 2.6 2.713.625 1.212.937 2.755.937 4.63V31h-3.352V17.364c0-1.733-.45-3.073-1.349-4.02-.89-.957-2.126-1.435-3.708-1.435-1.098 0-2.083.232-2.954.696-.862.464-1.544 1.141-2.046 2.031-.492.89-.738 1.97-.738 3.239Zm34.03 4.204V9.182h3.353V31h-3.353v-3.693h-.227c-.511 1.108-1.307 2.05-2.386 2.827-1.08.767-2.444 1.15-4.091 1.15-1.364 0-2.576-.298-3.637-.895-1.06-.606-1.894-1.515-2.5-2.727-.606-1.222-.909-2.76-.909-4.616V9.181h3.353v13.636c0 1.591.445 2.86 1.335 3.807.899.947 2.045 1.42 3.437 1.42.834 0 1.681-.213 2.543-.639.871-.426 1.6-1.08 2.187-1.96.597-.88.895-2.003.895-3.367ZM727.474 31V9.182h3.239v3.409h.284c.455-1.165 1.189-2.07 2.202-2.713 1.013-.654 2.23-.98 3.65-.98 1.44 0 2.638.326 3.594.98.966.644 1.719 1.548 2.259 2.713h.227c.559-1.127 1.397-2.022 2.514-2.685 1.118-.672 2.458-1.008 4.02-1.008 1.951 0 3.546.61 4.787 1.832 1.241 1.212 1.861 3.101 1.861 5.668V31h-3.352V16.398c0-1.61-.441-2.76-1.321-3.452-.881-.691-1.918-1.037-3.111-1.037-1.534 0-2.723.464-3.566 1.392-.842.919-1.264 2.083-1.264 3.495V31h-3.409V16.057c0-1.24-.402-2.24-1.207-2.997-.805-.767-1.842-1.15-3.111-1.15-.871 0-1.686.231-2.443.695-.748.464-1.354 1.108-1.818 1.932-.455.814-.682 1.757-.682 2.827V31h-3.353Zm41.187.511c-1.383 0-2.638-.26-3.765-.78-1.127-.531-2.021-1.294-2.684-2.288-.663-1.004-.995-2.216-.995-3.636 0-1.25.247-2.263.739-3.04a5.215 5.215 0 0 1 1.974-1.846 10.374 10.374 0 0 1 2.728-.995 33.153 33.153 0 0 1 3.025-.54c1.326-.17 2.401-.298 3.225-.383.833-.095 1.439-.251 1.818-.469.388-.218.582-.596.582-1.136v-.114c0-1.401-.383-2.49-1.15-3.267-.758-.776-1.908-1.165-3.452-1.165-1.6 0-2.855.35-3.764 1.051-.909.701-1.549 1.45-1.918 2.245l-3.182-1.137c.569-1.325 1.326-2.358 2.273-3.096a8.514 8.514 0 0 1 3.125-1.563 12.973 12.973 0 0 1 3.352-.454c.701 0 1.506.085 2.415.255a7.722 7.722 0 0 1 2.656 1.009c.862.511 1.577 1.283 2.145 2.315.568 1.032.853 2.415.853 4.148V31h-3.353v-2.954h-.17c-.227.473-.606.98-1.137 1.52-.53.54-1.235.998-2.116 1.377s-1.956.568-3.224.568Zm.511-3.011c1.326 0 2.443-.26 3.352-.781.919-.521 1.61-1.193 2.074-2.017.473-.824.71-1.69.71-2.6v-3.068c-.142.17-.454.327-.937.469a15.85 15.85 0 0 1-1.648.355c-.616.095-1.217.18-1.804.256-.578.066-1.046.123-1.406.17-.871.114-1.686.298-2.443.554-.749.246-1.355.62-1.819 1.122-.454.493-.681 1.165-.681 2.017 0 1.165.43 2.046 1.292 2.642.871.587 1.975.881 3.31.881Zm18.959-10.625V31h-3.352V9.182h3.239v3.409h.284a6.232 6.232 0 0 1 2.329-2.67c1.042-.682 2.387-1.023 4.034-1.023 1.478 0 2.77.303 3.878.909 1.108.596 1.97 1.505 2.586 2.727.615 1.212.923 2.746.923 4.602V31H798.7V17.364c0-1.714-.446-3.05-1.336-4.006-.89-.966-2.111-1.449-3.664-1.449-1.071 0-2.027.232-2.87.696-.833.464-1.491 1.141-1.974 2.031-.483.89-.725 1.97-.725 3.239Z"
              />
              <defs>
                <linearGradient
                  id="a"
                  x1="402"
                  x2="402"
                  y1="-8"
                  y2="40"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stop-color="#fff" stop-opacity="0" />
                  <stop offset="1" stop-color="#6D6D6D" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          <div
            style={{
              display: "flex",
              flexDirection: "column",
              gap: "24px",
            }}
            tw="px-12 pb-12"
          >
            {category && (
              <div tw="text-5xl opacity-50 leading-[0.75]">{`${category}/`}</div>
            )}
            <div tw="text-8xl mr-12 text-pretty">{title}</div>
          </div>
        </div>
      ),
      {
        width: 1200,
        height: 630,
        fonts: [
          {
            name: "Geist Sans",
            data: fontData,
            style: "normal",
          },
        ],
      },
    );
  } catch (e: any) {
    console.log(`${e.message}`);
    return new Response(`Failed to generate the image`, {
      status: 500,
    });
  }
}
